<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æŠ•èµ„æ”¶ç›Šè®¡ç®—å™¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 16px;
        }

        /* é¡¶éƒ¨çŠ¶æ€æ  */
        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 16px;
            background: #000;
            color: white;
            font-size: 14px;
            margin-bottom: 20px;
        }

        .status-left {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .status-right {
            display: flex;
            align-items: center;
            gap: 8px;
        }

         /* æ±‡æ€»ä¿¡æ¯å¡ç‰‡ */
         .summary-cards {
             display: flex;
             gap: 12px;
             margin-bottom: 20px;
         }
         
         .input-section .summary-cards {
             margin-bottom: 16px;
         }

         .summary-card {
             flex: 1;
             background: linear-gradient(135deg, rgba(202, 244, 247, 0.3) 0%, rgba(202, 244, 247, 0.2) 100%);
             border-radius: 8px;
             padding: 16px;
             text-align: center;
             border: 1px solid rgba(202, 244, 247, 0.5);
         }

        .summary-card .value {
            font-size: 28px;
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 4px;
        }

        .summary-card .label {
            font-size: 14px;
            color: #666;
        }

        /* è®¡ç®—ç±»å‹é€‰æ‹© */
        .calc-type-section {
            margin-bottom: 20px;
        }

        .calc-type-buttons {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 12px;
        }

        .calc-type-button {
            background: transparent;
            border: 1px solid #E0E0E0;
            border-radius: 8px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
        }

        .calc-type-button:hover {
            background: #F5F5F5;
            border-color: #BDBDBD;
        }

         .calc-type-button.active {
             background: linear-gradient(135deg, rgba(202, 244, 247, 0.6) 0%, rgba(202, 244, 247, 0.4) 100%);
             color: #2C3E50;
             border: 1px solid rgba(202, 244, 247, 0.8);
         }

        /* è¾“å…¥åŒºåŸŸ */
         .input-section {
             background: white;
             border-radius: 12px;
             padding: 24px;
             margin-bottom: 20px;
             border: 1px solid rgba(202, 244, 247, 0.6);
             box-shadow: 0 0 0 1px rgba(202, 244, 247, 0.6);
         }

        .section-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            color: #333;
        }

        .form-group {
            margin-bottom: 12px;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 14px;
        }

        .form-group-full {
            grid-column: 1 / -1;
        }

        .form-label {
            display: block;
            margin-bottom: 4px;
            font-weight: 500;
            color: #333;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 14px;
            transition: border-color 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: #2196F3;
            box-shadow: 0 0 0 2px rgba(33, 150, 243, 0.2);
        }

        .form-select {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 6px;
            font-size: 16px;
            background: white;
            cursor: pointer;
        }

        .radio-group {
            display: flex;
            gap: 20px;
            margin-top: 8px;
        }

        .radio-item {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .radio-item input[type="radio"] {
            margin: 0;
        }

         .info-text {
             padding: 8px 12px;
             font-size: 14px;
             color: #666;
             margin-top: 0px;
         }

        .button-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-top: 16px;
        }

         .calculate-button {
             background: linear-gradient(135deg, rgba(202, 244, 247, 0.6) 0%, rgba(202, 244, 247, 0.4) 100%);
             color: #2C3E50;
             border: 1px solid rgba(202, 244, 247, 0.8);
             padding: 12px 16px;
             border-radius: 6px;
             cursor: pointer;
             font-size: 14px;
             transition: all 0.3s ease;
             width: 100%;
         }

         .calculate-button:hover {
             background: linear-gradient(135deg, rgba(202, 244, 247, 0.8) 0%, rgba(202, 244, 247, 0.6) 100%);
             border-color: rgba(202, 244, 247, 1);
         }
ä¸­
        .calculate-button:disabled {
            background: #cccccc;
            cursor: not-allowed;
        }

        .clear-button {
            background: #6C757D;
            color: white;
            border: none;
            padding: 12px 16px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
            width: 100%;
        }

        .clear-button:hover {
            background: #5A6268;
        }

        /* è¾“å‡ºåŒºåŸŸ */
        .output-section {
            background: white;
            border-radius: 12px;
            padding: 24px;
        }

         .result-card {
             background: linear-gradient(135deg, rgba(202, 244, 247, 0.3) 0%, rgba(202, 244, 247, 0.2) 100%);
             border-radius: 8px;
             padding: 20px;
             margin-bottom: 16px;
         }

        .result-title {
            font-size: 18px;
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 12px;
        }

        .result-value {
            font-size: 24px;
            font-weight: bold;
            color: #1976D2;
            margin-bottom: 8px;
        }

        .result-description {
            font-size: 14px;
            color: #666;
            line-height: 1.5;
        }

        .calculation-details {
            background: #F5F5F5;
            border-radius: 6px;
            padding: 16px;
            margin-top: 16px;
        }

        .calculation-details h4 {
            color: #333;
            margin-bottom: 12px;
        }

        .calculation-details ul {
            list-style: none;
            padding: 0;
        }

        .calculation-details li {
            padding: 4px 0;
            border-bottom: 1px solid #E0E0E0;
        }

        .calculation-details li:last-child {
            border-bottom: none;
        }

        /* ç§»åŠ¨ç«¯ä¼˜åŒ–æ ·å¼ */
        @media (max-width: 768px) {
            .container {
                padding: 8px;
                max-width: 100%;
            }

            .status-bar {
                padding: 6px 12px;
                font-size: 12px;
                margin-bottom: 12px;
            }

            .summary-cards {
                display: flex;
                flex-direction: row;
                gap: 6px;
                margin-bottom: 16px;
            }

            .summary-card {
                flex: 1;
                padding: 8px 4px;
                min-height: 60px;
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
            }

            .summary-card .value {
                font-size: 20px;
                margin-bottom: 2px;
                color: #1976D2;
            }

            .summary-card .label {
                font-size: 10px;
                text-align: center;
                line-height: 1.2;
            }

            .calc-type-buttons {
                display: flex;
                flex-direction: row;
                gap: 6px;
            }

             .calc-type-button {
                 flex: 1;
                 padding: 12px 6px;
                 font-size: 13px;
                 min-height: 60px;
                 line-height: 1.3;
                 text-align: center;
             }

             .input-section, .output-section {
                 padding: 16px;
                 margin-bottom: 16px;
                 border: 1px solid rgba(202, 244, 247, 0.6);
                 box-shadow: 0 0 0 1px rgba(202, 244, 247, 0.6);
             }

            .section-title {
                font-size: 18px;
                margin-bottom: 16px;
            }

            .form-group {
                margin-bottom: 10px;
            }

            .form-row {
                grid-template-columns: 1fr 1fr;
                gap: 6px;
                margin-bottom: 10px;
            }

            .form-label {
                font-size: 13px;
                margin-bottom: 4px;
            }

            .form-input, .form-select {
                padding: 12px 10px;
                font-size: 14px;
                min-height: 44px;
                border-radius: 6px;
            }

            .button-row {
                gap: 8px;
                margin-top: 12px;
            }

            .calculate-button, .clear-button {
                padding: 12px 10px;
                font-size: 14px;
                min-height: 44px;
            }

             .info-text {
                 padding: 6px 10px;
                 font-size: 13px;
                 line-height: 1.4;
                 margin-top: 0px;
             }

            .calculate-button, .clear-button {
                padding: 14px 20px;
                font-size: 16px;
                min-height: 48px;
                border-radius: 8px;
            }

            .result-card {
                padding: 16px;
            }

            .result-title {
                font-size: 16px;
                margin-bottom: 10px;
            }

            .result-value {
                font-size: 20px;
                margin-bottom: 8px;
            }

            .result-description {
                font-size: 13px;
                line-height: 1.4;
            }

            .calculation-details {
                padding: 12px;
                margin-top: 12px;
            }

            .calculation-details h4 {
                font-size: 14px;
                margin-bottom: 8px;
            }

            .calculation-details li {
                font-size: 13px;
                padding: 3px 0;
            }

            .radio-group {
                flex-direction: column;
                gap: 8px;
            }

            /* ç§»åŠ¨ç«¯è¡¨æ ¼ä¼˜åŒ– */
            .table-container {
                overflow-x: auto;
                -webkit-overflow-scrolling: touch;
                border-radius: 6px;
                box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            }

            .details-table {
                min-width: 600px;
                font-size: 11px;
            }

            .details-table th,
            .details-table td {
                padding: 6px 4px;
                white-space: nowrap;
            }

            .details-table th {
                font-size: 10px;
                font-weight: 600;
            }

            /* ç§»åŠ¨ç«¯è§¦æ‘¸ä¼˜åŒ– */
            .calc-type-button:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }

            .calculate-button:active,
            .clear-button:active {
                transform: scale(0.98);
                transition: transform 0.1s ease;
            }
        }

        /* å¹³æ¿ç«¯ä¼˜åŒ– */
        @media (min-width: 769px) and (max-width: 1024px) {
            .container {
                max-width: 800px;
                padding: 20px;
            }

            .summary-cards {
                gap: 16px;
            }

            .calc-type-buttons {
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
            }

            .input-section, .output-section {
                padding: 24px;
            }
        }

        /* æ¡Œé¢ç«¯å¸ƒå±€ */
        @media (min-width: 1025px) {
            .input-output-container {
                display: grid;
                grid-template-columns: 1fr 1fr;
                gap: 24px;
            }

            .container {
                padding: 24px;
            }
        }

        /* è¶…å°å±å¹•ä¼˜åŒ– (iPhone SEç­‰) */
        @media (max-width: 375px) {
            .container {
                padding: 6px;
            }

            .status-bar {
                padding: 4px 8px;
                font-size: 11px;
            }

            .summary-cards {
                gap: 4px;
            }

            .summary-card {
                padding: 6px 2px;
                min-height: 55px;
            }

            .summary-card .value {
                font-size: 18px;
                color: #1976D2;
            }

            .summary-card .label {
                font-size: 9px;
            }

            .calc-type-buttons {
                gap: 4px;
            }

             .calc-type-button {
                 padding: 10px 4px;
                 font-size: 12px;
                 min-height: 55px;
                 line-height: 1.3;
             }

            .form-row {
                grid-template-columns: 1fr 1fr;
                gap: 4px;
                margin-bottom: 8px;
            }

             .input-section, .output-section {
                 padding: 12px;
                 border: 1px solid rgba(202, 244, 247, 0.6);
                 box-shadow: 0 0 0 1px rgba(202, 244, 247, 0.6);
             }

            .section-title {
                font-size: 16px;
            }

            .form-input, .form-select {
                padding: 12px 10px;
                font-size: 15px;
                min-height: 44px;
            }

            .calculate-button, .clear-button {
                padding: 12px 16px;
                font-size: 15px;
                min-height: 44px;
            }
        }

        .error-message {
            color: #F44336;
            font-size: 14px;
            margin-top: 4px;
        }

        .success-message {
            color: #4CAF50;
            font-size: 14px;
            margin-top: 4px;
        }

        .hidden {
            display: none;
        }

        /* ç§»åŠ¨ç«¯æ»šåŠ¨ä¼˜åŒ– */
        body {
            -webkit-overflow-scrolling: touch;
        }

        /* é˜²æ­¢ç§»åŠ¨ç«¯ç¼©æ”¾ */
        input[type="number"] {
            -webkit-appearance: none;
            -moz-appearance: textfield;
        }

        input[type="number"]::-webkit-outer-spin-button,
        input[type="number"]::-webkit-inner-spin-button {
            -webkit-appearance: none;
            margin: 0;
        }

        /* ç§»åŠ¨ç«¯ç„¦ç‚¹ä¼˜åŒ– */
        .form-input:focus,
        .form-select:focus {
            transform: scale(1.02);
            transition: transform 0.2s ease;
        }

        /* ç§»åŠ¨ç«¯æŒ‰é’®ç‚¹å‡»åé¦ˆ */
        .calc-type-button,
        .calculate-button,
        .clear-button {
            -webkit-tap-highlight-color: transparent;
            user-select: none;
        }
    </style>
</head>
<body>
    <!-- é¡¶éƒ¨çŠ¶æ€æ  -->
    <div class="status-bar">
        <div class="status-left">
            <a href="https://gengqinglang.github.io/financial-tools-homepage/" style="color: white; text-decoration: none; cursor: pointer;">â†</a>
            <span id="currentTime">14:44</span>
        </div>
        <div class="status-right">
            <span>ğŸ“¶</span>
            <span>ğŸ”‹ 59%</span>
            <span>â‹¯</span>
        </div>
    </div>

    <div class="container">
        <!-- æ ‡é¢˜ -->
         <h1 style="text-align: center; font-size: 28px; font-weight: bold; color: #2C3E50; margin-bottom: 24px;">æ¨¡æ‹ŸæŠ•èµ„è®¡ç®—å™¨</h1>
        
        <!-- è®¡ç®—ç±»å‹é€‰æ‹© -->
        <div class="calc-type-section">
            <div class="calc-type-buttons">
                 <button class="calc-type-button active" data-type="annual-savings">æ–¹å¼ä¸€<br>æ¯å¹´å¾—æ”’å¤šå°‘é’±ï¼Ÿ</button>
                 <button class="calc-type-button" data-type="investment-years">æ–¹å¼äºŒ<br>å¾—æ”’å¤šå°‘å¹´ï¼Ÿ</button>
                 <button class="calc-type-button" data-type="final-amount">æ–¹å¼ä¸‰<br>æœ€åèƒ½æ”’å¤šå°‘é’±ï¼Ÿ</button>
            </div>
        </div>

        <div class="input-output-container">
            <!-- è¾“å…¥åŒºåŸŸ -->
            <div class="input-section">
                <!-- æ±‡æ€»ä¿¡æ¯å¡ç‰‡ -->
                <div class="summary-cards">
                    <div class="summary-card">
                        <div class="value" id="totalInvestment">0ä¸‡</div>
                        <div class="label">æ€»æŠ•èµ„é‡‘é¢</div>
                    </div>
                    <div class="summary-card">
                        <div class="value" id="totalReturn">0ä¸‡</div>
                        <div class="label">æ€»æ”¶ç›Šé‡‘é¢</div>
                    </div>
                    <div class="summary-card">
                        <div class="value" id="investmentYears">0å¹´</div>
                        <div class="label">æŠ•èµ„å¹´é™</div>
                    </div>
                </div>
                
                <!-- ç¬¬ä¸€ç±»ï¼šè®¡ç®—æ¯å¹´å‚¨è“„ -->
                <div id="annual-savings-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="initialAmount1">åˆå§‹æŠ•çš„é’±(ä¸‡å…ƒ) *</label>
                            <input type="number" id="initialAmount1" class="form-input" placeholder="å¦‚:10" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="annualReturn1">æŠ•èµ„å¹´åŒ–æ”¶ç›Šç‡(%) *</label>
                            <input type="number" id="annualReturn1" class="form-input" placeholder="å¦‚:8" min="0" max="50" step="0.01">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="targetAmount1">æƒ³æœ€ç»ˆæ‹¿åˆ°çš„é’±(ä¸‡å…ƒ) *</label>
                            <input type="number" id="targetAmount1" class="form-input" placeholder="å¦‚:100" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="investmentYears1">æŠ•èµ„æ—¶é—´(å¹´) *</label>
                            <input type="number" id="investmentYears1" class="form-input" placeholder="å¦‚:10" min="1" max="50" step="1">
                        </div>
                    </div>

                </div>

                <!-- ç¬¬äºŒç±»ï¼šè®¡ç®—æŠ•èµ„å¹´é™ -->
                <div id="investment-years-form" class="hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="initialAmount2">åˆå§‹æŠ•çš„é’±(ä¸‡å…ƒ) *</label>
                            <input type="number" id="initialAmount2" class="form-input" placeholder="å¦‚:10" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="annualReturn2">æŠ•èµ„å¹´åŒ–æ”¶ç›Šç‡(%) *</label>
                            <input type="number" id="annualReturn2" class="form-input" placeholder="å¦‚:8" min="0" max="50" step="0.01">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="annualSavings2">æ¯å¹´å‚¨è“„é‡‘é¢(ä¸‡å…ƒ) *</label>
                            <input type="number" id="annualSavings2" class="form-input" placeholder="å¦‚:5" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="targetAmount2">æƒ³æœ€ç»ˆæ‹¿åˆ°çš„é’±(ä¸‡å…ƒ) *</label>
                            <input type="number" id="targetAmount2" class="form-input" placeholder="å¦‚:100" min="0" step="0.01">
                        </div>
                    </div>

                </div>

                <!-- ç¬¬ä¸‰ç±»ï¼šè®¡ç®—æœ€ç»ˆé‡‘é¢ -->
                <div id="final-amount-form" class="hidden">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="initialAmount3">åˆå§‹æŠ•çš„é’±(ä¸‡å…ƒ) *</label>
                            <input type="number" id="initialAmount3" class="form-input" placeholder="å¦‚:10" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="annualReturn3">æŠ•èµ„å¹´åŒ–æ”¶ç›Šç‡(%) *</label>
                            <input type="number" id="annualReturn3" class="form-input" placeholder="å¦‚:8" min="0" max="50" step="0.01">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label" for="annualSavings3">æ¯å¹´å‚¨è“„é‡‘é¢(ä¸‡å…ƒ) *</label>
                            <input type="number" id="annualSavings3" class="form-input" placeholder="å¦‚:5" min="0" step="0.01">
                        </div>
                        <div class="form-group">
                            <label class="form-label" for="investmentYears3">æŠ•èµ„æ—¶é—´(å¹´) *</label>
                            <input type="number" id="investmentYears3" class="form-input" placeholder="å¦‚:10" min="1" max="50" step="1">
                        </div>
                    </div>

                </div>

                <div class="button-row">
                    <button class="calculate-button" onclick="calculateInvestment()">å¼€å§‹è®¡ç®—</button>
                    <button class="clear-button" onclick="clearAllInputs()">æ¸…ç©ºè¾“å…¥é¡¹</button>
                </div>
            </div>

            <!-- è¾“å‡ºåŒºåŸŸ -->
            <div class="output-section">
                <h2 class="section-title">æµ‹ç®—ç»“æœ</h2>
                <div id="resultContainer">
                    <div class="result-card">
                        <div class="result-title">è¯·å¡«å†™æŠ•èµ„å‚æ•°å¹¶ç‚¹å‡»è®¡ç®—</div>
                        <div class="result-description">é€‰æ‹©è®¡ç®—ç±»å‹ï¼Œå¡«å†™ç›¸å…³å‚æ•°ï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨è®¡ç®—æŠ•èµ„è§„åˆ’ã€‚</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€å˜é‡
        let currentCalcType = 'annual-savings';

        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            console.log('æŠ•èµ„æ”¶ç›Šè®¡ç®—å™¨åˆå§‹åŒ–...');
            
            // è®¾ç½®é»˜è®¤æ—¥æœŸ
            updateCurrentTime();
            
            // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬å™¨
            initEventListeners();
            
            // åˆå§‹åŒ–ç§»åŠ¨ç«¯ä¼˜åŒ–
            initMobileOptimizations();
            
            console.log('æŠ•èµ„æ”¶ç›Šè®¡ç®—å™¨åˆå§‹åŒ–å®Œæˆ');
        });

        // äº‹ä»¶ç›‘å¬å™¨
        function initEventListeners() {
            // è®¡ç®—ç±»å‹æŒ‰é’®
            document.querySelectorAll('.calc-type-button').forEach(button => {
                button.addEventListener('click', () => {
                    const calcType = button.dataset.type;
                    switchCalcType(calcType);
                });
            });
        }

         // åˆ‡æ¢è®¡ç®—ç±»å‹
         function switchCalcType(type) {
             currentCalcType = type;
             
             // æ›´æ–°æŒ‰é’®çŠ¶æ€
             document.querySelectorAll('.calc-type-button').forEach(btn => {
                 btn.classList.remove('active');
             });
             document.querySelector(`[data-type="${type}"]`).classList.add('active');
             
             // æ˜¾ç¤º/éšè—å¯¹åº”çš„è¡¨å•
             document.querySelectorAll('[id$="-form"]').forEach(form => {
                 form.classList.add('hidden');
             });
             document.getElementById(`${type}-form`).classList.remove('hidden');
             
             console.log('åˆ‡æ¢åˆ°è®¡ç®—ç±»å‹:', type);
         }

        // è®¡ç®—æŠ•èµ„
        function calculateInvestment() {
            console.log('å¼€å§‹è®¡ç®—æŠ•èµ„...');
            
            let result;
            
            switch (currentCalcType) {
                case 'annual-savings':
                    result = calculateAnnualSavings();
                    break;
                case 'investment-years':
                    result = calculateInvestmentYears();
                    break;
                case 'final-amount':
                    result = calculateFinalAmount();
                    break;
                default:
                    alert('è¯·é€‰æ‹©è®¡ç®—ç±»å‹');
                    return;
            }
            
            if (result) {
                displayResult(result);
                updateSummaryCards(result);
            }
        }

        // ç¬¬ä¸€ç±»ï¼šè®¡ç®—æ¯å¹´å‚¨è“„
        function calculateAnnualSavings() {
            const initialAmount = parseFloat(document.getElementById('initialAmount1').value);
            const annualReturn = parseFloat(document.getElementById('annualReturn1').value);
            const targetAmount = parseFloat(document.getElementById('targetAmount1').value);
            const years = parseInt(document.getElementById('investmentYears1').value);
            
            // éªŒè¯è¾“å…¥
            if (!initialAmount || !annualReturn || !targetAmount || !years) {
                alert('è¯·å¡«å†™å®Œæ•´çš„æŠ•èµ„å‚æ•°');
                return null;
            }
            
            if (annualReturn <= 0 || annualReturn > 50) {
                alert('å¹´åŒ–æ”¶ç›Šç‡åº”åœ¨0-50%ä¹‹é—´');
                return null;
            }
            
            if (years <= 0 || years > 50) {
                alert('æŠ•èµ„å¹´é™åº”åœ¨1-50å¹´ä¹‹é—´');
                return null;
            }
            
            // è®¡ç®—æ¯å¹´å‚¨è“„é‡‘é¢
            const annualRate = annualReturn / 100;
            
            let annualSavings;
            if (annualRate === 0) {
                // æ— æ”¶ç›Šæƒ…å†µ
                annualSavings = (targetAmount - initialAmount) / years;
            } else {
                // æœ‰æ”¶ç›Šæƒ…å†µï¼Œä½¿ç”¨å¹´é‡‘ç°å€¼å…¬å¼
                // PMT = (FV - PV * (1 + r)^n) / (((1 + r)^n - 1) / r)
                const compoundFactor = Math.pow(1 + annualRate, years);
                annualSavings = (targetAmount - initialAmount * compoundFactor) / ((compoundFactor - 1) / annualRate);
            }
            
            // ç”Ÿæˆå¹´åº¦æ˜ç»†
            const yearlyDetails = [];
            let currentAmount = initialAmount;
            let totalInvestment = initialAmount;
            let totalReturn = 0;
            
            for (let year = 1; year <= years; year++) {
                const yearStartAmount = currentAmount;
                
                // è®¡ç®—å½“å¹´æ”¶ç›Šï¼ˆå¹´åˆæœ¬é‡‘ * å¹´åŒ–æ”¶ç›Šç‡ï¼‰
                const yearReturn = currentAmount * annualRate;
                currentAmount += yearReturn;
                totalReturn += yearReturn;
                
                // å¹´æœ«è¿½åŠ å‚¨è“„
                currentAmount += annualSavings;
                totalInvestment += annualSavings;
                
                // è®°å½•å¹´åº¦æ˜ç»†
                yearlyDetails.push({
                    year: year,
                    yearStartAmount: yearStartAmount,
                    yearReturn: yearReturn,
                    yearEndSavings: annualSavings,
                    yearEndAmount: currentAmount,
                    totalInvestment: totalInvestment,
                    totalReturn: totalReturn,
                    returnRate: yearStartAmount > 0 ? (yearReturn / yearStartAmount * 100) : 0,
                    cumulativeReturnRate: totalInvestment > 0 ? (totalReturn / totalInvestment * 100) : 0
                });
            }
            
            return {
                type: 'annual-savings',
                annualSavings: annualSavings,
                initialAmount: initialAmount,
                annualReturn: annualReturn,
                targetAmount: targetAmount,
                years: years,
                totalInvestment: totalInvestment,
                totalReturn: totalReturn,
                yearlyDetails: yearlyDetails
            };
        }

        // ç¬¬äºŒç±»ï¼šè®¡ç®—æŠ•èµ„å¹´é™
        function calculateInvestmentYears() {
            const initialAmount = parseFloat(document.getElementById('initialAmount2').value);
            const annualReturn = parseFloat(document.getElementById('annualReturn2').value);
            const annualSavings = parseFloat(document.getElementById('annualSavings2').value);
            const targetAmount = parseFloat(document.getElementById('targetAmount2').value);
            
            // éªŒè¯è¾“å…¥
            if (!initialAmount || !annualReturn || !annualSavings || !targetAmount) {
                alert('è¯·å¡«å†™å®Œæ•´çš„æŠ•èµ„å‚æ•°');
                return null;
            }
            
            if (annualReturn <= 0 || annualReturn > 50) {
                alert('å¹´åŒ–æ”¶ç›Šç‡åº”åœ¨0-50%ä¹‹é—´');
                return null;
            }
            
            if (annualSavings <= 0) {
                alert('æ¯å¹´å‚¨è“„é‡‘é¢åº”å¤§äº0');
                return null;
            }
            
            // ä½¿ç”¨è¿­ä»£æ³•è®¡ç®—æŠ•èµ„å¹´é™
            let years = 1;
            let currentAmount = initialAmount; // ä¿æŒä¸‡å…ƒå•ä½
            const targetValue = targetAmount; // ä¿æŒä¸‡å…ƒå•ä½
            const annualRate = annualReturn / 100;
            
            const yearlyDetails = [];
            let totalInvestment = initialAmount;
            let totalReturn = 0;
            
            while (currentAmount < targetValue && years <= 50) {
                const yearStartAmount = currentAmount;
                
                // è®¡ç®—å½“å¹´æ”¶ç›Šï¼ˆå¹´åˆæœ¬é‡‘ * å¹´åŒ–æ”¶ç›Šç‡ï¼‰
                const yearReturn = currentAmount * annualRate;
                currentAmount += yearReturn;
                totalReturn += yearReturn;
                
                // å¹´æœ«è¿½åŠ å‚¨è“„
                currentAmount += annualSavings;
                totalInvestment += annualSavings;
                
                // è®°å½•å¹´åº¦æ˜ç»†
                yearlyDetails.push({
                    year: years,
                    yearStartAmount: yearStartAmount,
                    yearReturn: yearReturn,
                    yearEndSavings: annualSavings,
                    yearEndAmount: currentAmount,
                    totalInvestment: totalInvestment,
                    totalReturn: totalReturn,
                    returnRate: yearStartAmount > 0 ? (yearReturn / yearStartAmount * 100) : 0,
                    cumulativeReturnRate: totalInvestment > 0 ? (totalReturn / totalInvestment * 100) : 0
                });
                
                years++;
            }
            
            if (years > 50) {
                alert('åœ¨ç»™å®šæ¡ä»¶ä¸‹ï¼Œ50å¹´å†…æ— æ³•è¾¾åˆ°ç›®æ ‡é‡‘é¢');
                return null;
            }
            
            return {
                type: 'investment-years',
                years: years - 1, // å› ä¸ºå¾ªç¯ç»“æŸåyearsæ¯”å®é™…å¹´æ•°å¤š1
                initialAmount: initialAmount,
                annualReturn: annualReturn,
                annualSavings: annualSavings,
                targetAmount: targetAmount,
                totalInvestment: totalInvestment,
                totalReturn: totalReturn,
                yearlyDetails: yearlyDetails
            };
        }

        // ç¬¬ä¸‰ç±»ï¼šè®¡ç®—æœ€ç»ˆé‡‘é¢
        function calculateFinalAmount() {
            const initialAmount = parseFloat(document.getElementById('initialAmount3').value);
            const annualReturn = parseFloat(document.getElementById('annualReturn3').value);
            const annualSavings = parseFloat(document.getElementById('annualSavings3').value);
            const years = parseInt(document.getElementById('investmentYears3').value);
            
            // éªŒè¯è¾“å…¥
            if (!initialAmount || !annualReturn || !annualSavings || !years) {
                alert('è¯·å¡«å†™å®Œæ•´çš„æŠ•èµ„å‚æ•°');
                return null;
            }
            
            if (annualReturn <= 0 || annualReturn > 50) {
                alert('å¹´åŒ–æ”¶ç›Šç‡åº”åœ¨0-50%ä¹‹é—´');
                return null;
            }
            
            if (annualSavings <= 0) {
                alert('æ¯å¹´å‚¨è“„é‡‘é¢åº”å¤§äº0');
                return null;
            }
            
            if (years <= 0 || years > 50) {
                alert('æŠ•èµ„å¹´é™åº”åœ¨1-50å¹´ä¹‹é—´');
                return null;
            }
            
            // è®¡ç®—æœ€ç»ˆé‡‘é¢å’Œå¹´åº¦æ˜ç»†
            let currentAmount = initialAmount; // ä¿æŒä¸‡å…ƒå•ä½
            const annualRate = annualReturn / 100;
            const yearlyDetails = [];
            let totalInvestment = initialAmount;
            let totalReturn = 0;
            
            for (let year = 1; year <= years; year++) {
                const yearStartAmount = currentAmount;
                
                // è®¡ç®—å½“å¹´æ”¶ç›Šï¼ˆå¹´åˆæœ¬é‡‘ * å¹´åŒ–æ”¶ç›Šç‡ï¼‰
                const yearReturn = currentAmount * annualRate;
                currentAmount += yearReturn;
                totalReturn += yearReturn;
                
                // å¹´æœ«è¿½åŠ å‚¨è“„
                currentAmount += annualSavings;
                totalInvestment += annualSavings;
                
                // è®°å½•å¹´åº¦æ˜ç»†
                yearlyDetails.push({
                    year: year,
                    yearStartAmount: yearStartAmount,
                    yearReturn: yearReturn,
                    yearEndSavings: annualSavings,
                    yearEndAmount: currentAmount,
                    totalInvestment: totalInvestment,
                    totalReturn: totalReturn,
                    returnRate: yearStartAmount > 0 ? (yearReturn / yearStartAmount * 100) : 0,
                    cumulativeReturnRate: totalInvestment > 0 ? (totalReturn / totalInvestment * 100) : 0
                });
            }
            
            return {
                type: 'final-amount',
                finalAmount: currentAmount,
                initialAmount: initialAmount,
                annualReturn: annualReturn,
                annualSavings: annualSavings,
                years: years,
                totalInvestment: totalInvestment,
                totalReturn: totalReturn,
                yearlyDetails: yearlyDetails
            };
        }

        // ç”Ÿæˆå¹´åº¦æ˜ç»†è¡¨æ ¼
        function generateYearlyDetailsTable(yearlyDetails) {
            if (!yearlyDetails || yearlyDetails.length === 0) {
                return '';
            }
            
            // æ£€æµ‹æ˜¯å¦ä¸ºç§»åŠ¨è®¾å¤‡
            const isMobile = window.innerWidth <= 768;
            
            if (isMobile) {
                // ç§»åŠ¨ç«¯ä½¿ç”¨å¡ç‰‡å¼å¸ƒå±€
                return generateMobileYearlyDetails(yearlyDetails);
            } else {
                // æ¡Œé¢ç«¯ä½¿ç”¨è¡¨æ ¼å¸ƒå±€
                return generateDesktopYearlyDetails(yearlyDetails);
            }
        }

        // ç§»åŠ¨ç«¯å¹´åº¦æ˜ç»†å¡ç‰‡å¸ƒå±€
        function generateMobileYearlyDetails(yearlyDetails) {
            let html = `
                <div class="yearly-details" style="margin-top: 20px;">
                    <h4>å¹´åº¦æŠ•èµ„æµ‹ç®—æ˜ç»†</h4>
                    <div class="mobile-details-container" style="margin-top: 12px;">
            `;
            
            yearlyDetails.forEach((detail, index) => {
                html += `
                     <div class="year-detail-card" style="
                         background: linear-gradient(135deg, rgba(202, 244, 247, 0.3) 0%, rgba(202, 244, 247, 0.2) 100%);
                         border-radius: 8px;
                         padding: 12px;
                         margin-bottom: 8px;
                     ">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                            <h5 style="margin: 0; color: #1976D2; font-size: 14px;">ç¬¬${detail.year}å¹´</h5>
                            <span style="font-size: 12px; color: #666;">ç´¯è®¡æŠ•èµ„: ${formatAmount(detail.totalInvestment)}ä¸‡ | ç´¯è®¡æ”¶ç›Š: ${formatAmount(detail.totalReturn)}ä¸‡</span>
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px; font-size: 12px;">
                            <div>
                                <span style="color: #666;">å¹´åˆæœ¬é‡‘:</span><br>
                                <strong>${formatAmount(detail.yearStartAmount)}ä¸‡</strong>
                            </div>
                            <div>
                                <span style="color: #666;">å½“å¹´æ”¶ç›Š:</span><br>
                                <strong style="color: #2196F3;">${formatAmount(detail.yearReturn)}ä¸‡</strong>
                            </div>
                            <div>
                                <span style="color: #666;">å¹´æœ«å‚¨è“„:</span><br>
                                <strong>${formatAmount(detail.yearEndSavings)}ä¸‡</strong>
                            </div>
                            <div>
                                <span style="color: #666;">å¹´æœ«æœ¬é‡‘:</span><br>
                                <strong style="color: #1976D2;">${formatAmount(detail.yearEndAmount)}ä¸‡</strong>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += `
                    </div>
                </div>
            `;
            
            return html;
        }

        // æ¡Œé¢ç«¯å¹´åº¦æ˜ç»†è¡¨æ ¼å¸ƒå±€
        function generateDesktopYearlyDetails(yearlyDetails) {
            let tableHtml = `
                <div class="yearly-details" style="margin-top: 20px;">
                    <h4>å¹´åº¦æŠ•èµ„æµ‹ç®—æ˜ç»†</h4>
                    <div class="table-container" style="overflow-x: auto; margin-top: 10px;">
                        <table class="details-table" style="width: 100%; border-collapse: collapse; font-size: 12px;">
                            <thead>
                                <tr style="background-color: #f5f5f5;">
                                    <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">å¹´ä»½</th>
                                    <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">å¹´åˆæœ¬é‡‘<br>(ä¸‡å…ƒ)</th>
                                    <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">å½“å¹´æ”¶ç›Š<br>(ä¸‡å…ƒ)</th>
                                    <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">å¹´æœ«å‚¨è“„<br>(ä¸‡å…ƒ)</th>
                                    <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">å¹´æœ«æœ¬é‡‘<br>(ä¸‡å…ƒ)</th>
                                    <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">ç´¯è®¡æŠ•èµ„<br>(ä¸‡å…ƒ)</th>
                                    <th style="border: 1px solid #ddd; padding: 8px; text-align: center;">ç´¯è®¡æ”¶ç›Š<br>(ä¸‡å…ƒ)</th>
                                </tr>
                            </thead>
                            <tbody>
            `;
            
            yearlyDetails.forEach(detail => {
                tableHtml += `
                    <tr>
                        <td style="border: 1px solid #ddd; padding: 6px; text-align: center;">ç¬¬${detail.year}å¹´</td>
                        <td style="border: 1px solid #ddd; padding: 6px; text-align: right;">${formatAmount(detail.yearStartAmount)}</td>
                        <td style="border: 1px solid #ddd; padding: 6px; text-align: right; color: #2196F3;">${formatAmount(detail.yearReturn)}</td>
                        <td style="border: 1px solid #ddd; padding: 6px; text-align: right;">${formatAmount(detail.yearEndSavings)}</td>
                        <td style="border: 1px solid #ddd; padding: 6px; text-align: right; font-weight: bold;">${formatAmount(detail.yearEndAmount)}</td>
                        <td style="border: 1px solid #ddd; padding: 6px; text-align: right;">${formatAmount(detail.totalInvestment)}</td>
                        <td style="border: 1px solid #ddd; padding: 6px; text-align: right; color: #2196F3;">${formatAmount(detail.totalReturn)}</td>
                    </tr>
                `;
            });
            
            tableHtml += `
                            </tbody>
                        </table>
                    </div>
                </div>
            `;
            
            return tableHtml;
        }

        // æ˜¾ç¤ºç»“æœ
        function displayResult(result) {
            const container = document.getElementById('resultContainer');
            let html = '';
            
            switch (result.type) {
                case 'annual-savings':
                    html = `
                        <div class="result-card">
                            <div class="result-title">æ¯å¹´éœ€è¦å‚¨è“„é‡‘é¢</div>
                            <div class="result-value">${formatAmount(result.annualSavings)}ä¸‡å…ƒ</div>
                            <div class="result-description">
                                åœ¨å¹´åŒ–æ”¶ç›Šç‡${result.annualReturn}%çš„æƒ…å†µä¸‹ï¼Œä»${result.initialAmount}ä¸‡å…ƒèµ·å§‹èµ„é‡‘å¼€å§‹ï¼Œ
                                æŠ•èµ„${result.years}å¹´è¾¾åˆ°${result.targetAmount}ä¸‡å…ƒç›®æ ‡ï¼Œæ¯å¹´éœ€è¦å‚¨è“„${formatAmount(result.annualSavings)}ä¸‡å…ƒã€‚
                            </div>
                        </div>
                         <div class="calculation-details">
                             <h4>è®¡ç®—è¯¦æƒ…</h4>
                             <ul>
                                 <li>èµ·å§‹æŠ•èµ„é‡‘é¢ï¼š${result.initialAmount}ä¸‡å…ƒ</li>
                                 <li>å¹´åŒ–æ”¶ç›Šç‡ï¼š${result.annualReturn}%</li>
                                 <li>æŠ•èµ„å¹´é™ï¼š${result.years}å¹´</li>
                                 <li>ç›®æ ‡é‡‘é¢ï¼š${result.targetAmount}ä¸‡å…ƒ</li>
                                 <li>æ¯å¹´å‚¨è“„ï¼š${formatAmount(result.annualSavings)}ä¸‡å…ƒ</li>
                                 <li>æ€»æŠ•èµ„é‡‘é¢ï¼š${formatAmount(result.totalInvestment)}ä¸‡å…ƒ</li>
                             </ul>
                             <p style="margin-top: 12px; font-size: 14px; color: #666; font-style: italic;">
                                 <strong>å¤‡æ³¨ï¼š</strong>è®¡ç®—æ¯å¹´éœ€å­˜å¤šå°‘é’±ï¼Œå¹´åº•å­˜é’±æ¬¡å¹´æŠ•èµ„ï¼Œæ”¶ç›Šæ»šå…¥ä¸‹å¹´
                             </p>
                         </div>
                        ${generateYearlyDetailsTable(result.yearlyDetails)}
                    `;
                    break;
                    
                case 'investment-years':
                    html = `
                        <div class="result-card">
                            <div class="result-title">éœ€è¦æŠ•èµ„å¹´é™</div>
                            <div class="result-value">${result.years}å¹´</div>
                            <div class="result-description">
                                åœ¨å¹´åŒ–æ”¶ç›Šç‡${result.annualReturn}%çš„æƒ…å†µä¸‹ï¼Œä»${result.initialAmount}ä¸‡å…ƒèµ·å§‹èµ„é‡‘å¼€å§‹ï¼Œ
                                æ¯å¹´å‚¨è“„${result.annualSavings}ä¸‡å…ƒï¼Œéœ€è¦æŠ•èµ„${result.years}å¹´æ‰èƒ½è¾¾åˆ°${result.targetAmount}ä¸‡å…ƒç›®æ ‡ã€‚
                            </div>
                        </div>
                         <div class="calculation-details">
                             <h4>è®¡ç®—è¯¦æƒ…</h4>
                             <ul>
                                 <li>èµ·å§‹æŠ•èµ„é‡‘é¢ï¼š${result.initialAmount}ä¸‡å…ƒ</li>
                                 <li>å¹´åŒ–æ”¶ç›Šç‡ï¼š${result.annualReturn}%</li>
                                 <li>æ¯å¹´å‚¨è“„ï¼š${result.annualSavings}ä¸‡å…ƒ</li>
                                 <li>ç›®æ ‡é‡‘é¢ï¼š${result.targetAmount}ä¸‡å…ƒ</li>
                                 <li>æŠ•èµ„å¹´é™ï¼š${result.years}å¹´</li>
                                 <li>æ€»æŠ•èµ„é‡‘é¢ï¼š${formatAmount(result.totalInvestment)}ä¸‡å…ƒ</li>
                             </ul>
                             <p style="margin-top: 12px; font-size: 14px; color: #666; font-style: italic;">
                                 <strong>å¤‡æ³¨ï¼š</strong>è®¡ç®—éœ€è¦æŠ•èµ„å¤šå°‘å¹´ï¼Œå¹´åº•å­˜é’±æ¬¡å¹´æŠ•èµ„ï¼Œæ”¶ç›Šæ»šå…¥ä¸‹å¹´
                             </p>
                         </div>
                        ${generateYearlyDetailsTable(result.yearlyDetails)}
                    `;
                    break;
                    
                case 'final-amount':
                    html = `
                        <div class="result-card">
                            <div class="result-title">æœ€ç»ˆæ”¶ç›Šé‡‘é¢</div>
                            <div class="result-value">${formatAmount(result.finalAmount)}ä¸‡å…ƒ</div>
                            <div class="result-description">
                                åœ¨å¹´åŒ–æ”¶ç›Šç‡${result.annualReturn}%çš„æƒ…å†µä¸‹ï¼Œä»${result.initialAmount}ä¸‡å…ƒèµ·å§‹èµ„é‡‘å¼€å§‹ï¼Œ
                                æ¯å¹´å‚¨è“„${result.annualSavings}ä¸‡å…ƒï¼ŒæŠ•èµ„${result.years}å¹´åæœ€ç»ˆå¯è·å¾—${formatAmount(result.finalAmount)}ä¸‡å…ƒã€‚
                            </div>
                        </div>
                         <div class="calculation-details">
                             <h4>è®¡ç®—è¯¦æƒ…</h4>
                             <ul>
                                 <li>èµ·å§‹æŠ•èµ„é‡‘é¢ï¼š${result.initialAmount}ä¸‡å…ƒ</li>
                                 <li>å¹´åŒ–æ”¶ç›Šç‡ï¼š${result.annualReturn}%</li>
                                 <li>æ¯å¹´å‚¨è“„ï¼š${result.annualSavings}ä¸‡å…ƒ</li>
                                 <li>æŠ•èµ„å¹´é™ï¼š${result.years}å¹´</li>
                                 <li>æœ€ç»ˆé‡‘é¢ï¼š${formatAmount(result.finalAmount)}ä¸‡å…ƒ</li>
                                 <li>æ€»æŠ•èµ„é‡‘é¢ï¼š${formatAmount(result.totalInvestment)}ä¸‡å…ƒ</li>
                                 <li>æ€»æ”¶ç›Šï¼š${formatAmount(result.finalAmount - result.totalInvestment)}ä¸‡å…ƒ</li>
                             </ul>
                             <p style="margin-top: 12px; font-size: 14px; color: #666; font-style: italic;">
                                 <strong>å¤‡æ³¨ï¼š</strong>è®¡ç®—æœ€ç»ˆèƒ½æ‹¿åˆ°å¤šå°‘é’±ï¼Œå¹´åº•å­˜é’±æ¬¡å¹´æŠ•èµ„ï¼Œæ”¶ç›Šæ»šå…¥ä¸‹å¹´
                             </p>
                         </div>
                        ${generateYearlyDetailsTable(result.yearlyDetails)}
                    `;
                    break;
            }
            
            container.innerHTML = html;
        }

        // æ›´æ–°æ±‡æ€»å¡ç‰‡
        function updateSummaryCards(result) {
            document.getElementById('totalInvestment').textContent = formatAmount(result.totalInvestment) + 'ä¸‡';
            document.getElementById('totalReturn').textContent = formatAmount(result.totalReturn) + 'ä¸‡';
            document.getElementById('investmentYears').textContent = result.years + 'å¹´';
        }

        // æ ¼å¼åŒ–é‡‘é¢
        function formatAmount(amount) {
            // amountå·²ç»æ˜¯ä¸‡å…ƒå•ä½ï¼Œç›´æ¥æ ¼å¼åŒ–
            return new Intl.NumberFormat('zh-CN', {
                minimumFractionDigits: 2,
                maximumFractionDigits: 2
            }).format(amount);
        }

        // æ¸…ç©ºè¾“å…¥é¡¹
        function clearAllInputs() {
            // æ¸…ç©ºæ‰€æœ‰è¾“å…¥æ¡†
            document.querySelectorAll('.form-input').forEach(input => {
                input.value = '';
            });
            
            // é‡ç½®ç»“æœ
            document.getElementById('resultContainer').innerHTML = `
                <div class="result-card">
                    <div class="result-title">è¯·å¡«å†™æŠ•èµ„å‚æ•°å¹¶ç‚¹å‡»è®¡ç®—</div>
                    <div class="result-description">é€‰æ‹©è®¡ç®—ç±»å‹ï¼Œå¡«å†™ç›¸å…³å‚æ•°ï¼Œç³»ç»Ÿå°†ä¸ºæ‚¨è®¡ç®—æŠ•èµ„è§„åˆ’ã€‚</div>
                </div>
            `;
            
            // é‡ç½®æ±‡æ€»å¡ç‰‡
            document.getElementById('totalInvestment').textContent = '0ä¸‡';
            document.getElementById('totalReturn').textContent = '0ä¸‡';
            document.getElementById('investmentYears').textContent = '0å¹´';
            
            console.log('è¾“å…¥é¡¹å·²æ¸…ç©º');
        }

        // åˆå§‹åŒ–ç§»åŠ¨ç«¯ä¼˜åŒ–
        function initMobileOptimizations() {
            // ç›‘å¬çª—å£å¤§å°å˜åŒ–ï¼Œé‡æ–°æ¸²æŸ“è¡¨æ ¼
            window.addEventListener('resize', function() {
                // é˜²æŠ–å¤„ç†ï¼Œé¿å…é¢‘ç¹è§¦å‘
                clearTimeout(window.resizeTimeout);
                window.resizeTimeout = setTimeout(() => {
                    // å¦‚æœæœ‰è®¡ç®—ç»“æœï¼Œé‡æ–°æ¸²æŸ“è¡¨æ ¼ä»¥é€‚åº”æ–°çš„å±å¹•å°ºå¯¸
                    const resultContainer = document.getElementById('resultContainer');
                    if (resultContainer.innerHTML.includes('å¹´åº¦æŠ•èµ„æµ‹ç®—æ˜ç»†')) {
                        // è¿™é‡Œå¯ä»¥æ·»åŠ é‡æ–°æ¸²æŸ“é€»è¾‘ï¼Œä½†ä¸ºäº†ç®€åŒ–ï¼Œæˆ‘ä»¬æš‚æ—¶ä¸å®ç°
                        console.log('å±å¹•å°ºå¯¸å˜åŒ–ï¼Œå½“å‰å®½åº¦:', window.innerWidth);
                    }
                }, 250);
            });

            // ç§»åŠ¨ç«¯è§¦æ‘¸ä¼˜åŒ–
            if (window.innerWidth <= 768) {
                // æ·»åŠ è§¦æ‘¸åé¦ˆ
                document.querySelectorAll('.calc-type-button, .calculate-button, .clear-button').forEach(button => {
                    button.addEventListener('touchstart', function() {
                        this.style.transform = 'scale(0.98)';
                    });
                    
                    button.addEventListener('touchend', function() {
                        this.style.transform = 'scale(1)';
                    });
                });

                // ä¼˜åŒ–è¾“å…¥æ¡†åœ¨ç§»åŠ¨ç«¯çš„ä½“éªŒ
                document.querySelectorAll('.form-input').forEach(input => {
                    input.addEventListener('focus', function() {
                        // é˜²æ­¢iOS Safariè‡ªåŠ¨ç¼©æ”¾
                        if (window.innerWidth <= 768) {
                            this.style.fontSize = '16px';
                        }
                    });
                });
            }
        }

        // æ›´æ–°å½“å‰æ—¶é—´
        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
            document.getElementById('currentTime').textContent = timeString;
            
            // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡æ—¶é—´
            setTimeout(() => updateCurrentTime(), 60000);
        }
    </script>
</body>
</html>
